"use strict";var _createClass=function(){function s(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}}();function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var HorizontalRollPagination=function(){function i(t){_classCallCheck(this,i),this.preDom=t.preDom,this.nextDom=t.nextDom,this.scrollDom=t.scrollDom,this.boxDom=t.box,this.loop=t.loop||!1,this.speed=t.speed||5,this.parentWidth=parseInt(window.getComputedStyle(this.boxDom).width),this.itemsDom=t.itemsDom,this.subList=this.getChildren(t.itemsDom),this.subWidth=parseInt(window.getComputedStyle(this.subList[0]).width)+parseInt(window.getComputedStyle(this.subList[0]).marginLeft)+parseInt(window.getComputedStyle(this.subList[0]).marginRight),this.count=this.getTotalPage(this.parentWidth,this.subWidth,this.subList.length),this.left=0,this.moveWidth=this.subList.length*this.subWidth-this.parentWidth,this.restWidth=this.moveWidth}return _createClass(i,[{key:"init",value:function(){this.loop||(this.preDom.style.display="none"),this.preDom.addEventListener("click",this.preEvent.bind(this),!1),this.nextDom.addEventListener("click",this.nextEvent.bind(this),!1)}},{key:"refresh",value:function(){var t=parseInt(window.getComputedStyle(this.boxDom).width),i=t-this.parentWidth;this.moveWidth=this.moveWidth-i,this.restWidth=this.restWidth-i,this.parentWidth=t,this.count=this.getTotalPage(this.parentWidth,this.subWidth,this.subList.length)}},{key:"reset",value:function(){this.subList=this.getChildren(this.itemsDom);var t=parseInt(window.getComputedStyle(this.boxDom).width);this.moveWidth=this.subList.length*this.subWidth-t,this.restWidth=this.moveWidth,this.parentWidth=t,this.count=this.getTotalPage(this.parentWidth,this.subWidth,this.subList.length)}},{key:"preEvent",value:function(){var t,i,e,s,h=this.subWidth*this.count;this.restWidth===this.moveWidth&&this.loop?(t=this.scrollDom,i=-this.moveWidth,this.animate(t,this.left,i,!0,this.speed,!0),this.left=i,this.restWidth=0):(this.moveWidth-this.restWidth<h&&(h=this.moveWidth-this.restWidth),e=this.scrollDom,s=this.left+h,this.animate(e,this.left,s,!1,this.speed),this.left=s,this.restWidth=this.restWidth+h),this.checkClickButton()}},{key:"nextEvent",value:function(){var t,i,e,s=this.count*this.subWidth;0===this.restWidth&&this.loop?(t=this.scrollDom,this.animate(t,this.left,0,!1,this.speed,!0),this.left=0,this.restWidth=this.moveWidth):(this.restWidth<s&&(s=this.restWidth),i=this.scrollDom,e=this.left-s,this.animate(i,this.left,e,!0,this.speed),this.left=e,this.restWidth=this.restWidth-s),this.checkClickButton()}},{key:"checkClickButton",value:function(){this.loop||(0==this.restWidth?(this.preDom.style.display="block",this.nextDom.style.display="none"):(this.restWidth==this.moveWidth?this.preDom.style.display="none":this.preDom.style.display="block",this.nextDom.style.display="block"))}},{key:"getTotalPage",value:function(t,i){return parseInt(parseInt(t)/parseInt(i))}},{key:"animate",value:function(i,e,s,h,n,t){t&&(n*=2),window.requestAnimationFrame(function t(){h?e-=n:e+=n,i.style.left=e+"px",h?s<e?window.requestAnimationFrame(t):i.style.left=e+"px":e<s?window.requestAnimationFrame(t):i.style.left=e+"px"})}},{key:"getChildren",value:function(t){for(var i,e=[],s=t.getElementsByTagName("*"),h=0,n=s.length;h<n;++h){1===s[h].nodeType?1==(i=s[h].parentNode).nodeType?i==t&&(e[e.length]=s[h]):i.parentNode==t&&(e[e.length]=s[h]):alert(s[h].nodeType)}return e}}]),i}();window.HorizontalRollPagination=HorizontalRollPagination;