"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var HorizontalRollPagination=function(){function HorizontalRollPagination(config){_classCallCheck(this,HorizontalRollPagination),this.preDom=config.preDom,this.nextDom=config.nextDom,this.scrollDom=config.scrollDom,this.boxDom=config.box,this.loop=config.loop||!1,this.speed=config.speed||5,this.parentWidth=parseInt(window.getComputedStyle(this.boxDom).width),this.itemsDom=config.itemsDom,this.subList=this.getChildren(config.itemsDom),this.subWidth=parseInt(window.getComputedStyle(this.subList[0]).width)+parseInt(window.getComputedStyle(this.subList[0]).marginLeft)+parseInt(window.getComputedStyle(this.subList[0]).marginRight),this.count=this.getTotalPage(this.parentWidth,this.subWidth,this.subList.length),this.left=0,this.moveWidth=this.subList.length*this.subWidth-this.parentWidth,this.restWidth=this.moveWidth}return _createClass(HorizontalRollPagination,[{key:"init",value:function(){this.loop||(this.preDom.style.display="none"),this.preDom.addEventListener("click",this.preEvent.bind(this),!1),this.nextDom.addEventListener("click",this.nextEvent.bind(this),!1)}},{key:"refresh",value:function(){var parentWidth=parseInt(window.getComputedStyle(this.boxDom).width),gap=parentWidth-this.parentWidth;this.moveWidth=this.moveWidth-gap,this.restWidth=this.restWidth-gap,this.parentWidth=parentWidth,this.count=this.getTotalPage(this.parentWidth,this.subWidth,this.subList.length),this.checkClickButton()}},{key:"reset",value:function(){this.subList=this.getChildren(this.itemsDom);var parentWidth=parseInt(window.getComputedStyle(this.boxDom).width);this.moveWidth=this.subList.length*this.subWidth-parentWidth,this.restWidth=this.moveWidth,this.parentWidth=parentWidth,this.count=this.getTotalPage(this.parentWidth,this.subWidth,this.subList.length),this.checkClickButton()}},{key:"preEvent",value:function(){var element,target,_element,_target,restWidth=this.subWidth*this.count;this.restWidth===this.moveWidth&&this.loop?(element=this.scrollDom,target=-this.moveWidth,this.animate(element,this.left,target,!0,this.speed,!0),this.left=target,this.restWidth=0):(this.moveWidth-this.restWidth<restWidth&&(restWidth=this.moveWidth-this.restWidth),_element=this.scrollDom,_target=this.left+restWidth,this.animate(_element,this.left,_target,!1,this.speed),this.left=_target,this.restWidth=this.restWidth+restWidth),this.checkClickButton()}},{key:"nextEvent",value:function(){var element,_element2,_target2,restWidth=this.count*this.subWidth;0===this.restWidth&&this.loop?(element=this.scrollDom,this.animate(element,this.left,0,!1,this.speed,!0),this.left=0,this.restWidth=this.moveWidth):(this.restWidth<restWidth&&(restWidth=this.restWidth),_element2=this.scrollDom,_target2=this.left-restWidth,this.animate(_element2,this.left,_target2,!0,this.speed),this.left=_target2,this.restWidth=this.restWidth-restWidth),this.checkClickButton()}},{key:"checkClickButton",value:function(){this.loop||(0==this.restWidth?(this.preDom.style.display="block",this.nextDom.style.display="none"):(this.restWidth==this.moveWidth?this.preDom.style.display="none":this.preDom.style.display="block",this.nextDom.style.display="block"))}},{key:"getTotalPage",value:function(pWidth,sWidth){return parseInt(parseInt(pWidth)/parseInt(sWidth))}},{key:"animate",value:function(element,base,target,direction,speed,isLoop){isLoop&&(speed*=2),window.requestAnimationFrame(function step(){direction?base-=speed:base+=speed,element.style.left=base+"px",direction?target<base?window.requestAnimationFrame(step):element.style.left=base+"px":base<target?window.requestAnimationFrame(step):element.style.left=base+"px"})}},{key:"getChildren",value:function(obj){for(var temp,objChild=[],objs=obj.getElementsByTagName("*"),i=0,j=objs.length;i<j;++i){1===objs[i].nodeType?1==(temp=objs[i].parentNode).nodeType?temp==obj&&(objChild[objChild.length]=objs[i]):temp.parentNode==obj&&(objChild[objChild.length]=objs[i]):alert(objs[i].nodeType)}return objChild}}]),HorizontalRollPagination}();window.HorizontalRollPagination=HorizontalRollPagination;